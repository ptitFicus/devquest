import{j as e,b as f,r as a,M as h,L as u,a as j}from"./index-zXFk5viu.js";import{T as g}from"./TeamDetails-4cavXoyY.js";const m="/assets/index-DP9aDpo8.png",p="/assets/mission-DY_HLtIg.png";function y({team:n}){return e.jsx("div",{children:n.heros.length===0?"Aucun membre dans votre groupe":e.jsx(g,{team:n,memberActions:[],actions:[]})})}function b({quests:n,canStart:t}){const s=j(),r=a.useRef(null),[o,i]=a.useState(null),{refreshMoney:l,money:x}=a.useContext(h);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{position:"relative",height:"100%"},children:[e.jsx("div",{id:"parchment"}),e.jsxs("div",{style:{width:"75%",position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",padding:"1rem 4rem",fontFamily:"'Brush Script MT', cursive",fontSize:"1.5rem",margin:"2rem",top:"0",bottom:"0",overflowY:"scroll"},children:[e.jsxs("h2",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"3rem",margin:"0"},children:[e.jsx("img",{src:p,style:{width:"5rem",height:"5rem",marginBottom:"1rem"},"aria-hidden":!0}),e.jsx("br",{})," Quêtes"]}),e.jsx("ul",{style:{padding:"0",margin:"0",flexGrow:"1",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:n.map(c=>e.jsxs("li",{style:{margin:"0",listStyle:"none",display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center",fontSize:"2rem"},children:[c.nom,e.jsx("br",{}),e.jsx(C,{difficulty:c.difficulte}),e.jsx("br",{}),e.jsx("button",{className:"devquest-btn-secondary",disabled:!t,type:"button",onClick:()=>{fetch(`/api/quetes/${c.nom}/_commencer`,{method:"POST"}).then(d=>d.json()).then(d=>{i(d),s.invalidate(),l()}).then(()=>{})},children:"commencer"})]}))}),e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("button",{style:{},className:"devquest-btn",onClick:()=>fetch("/api/quetes/_reroll",{method:"POST"}).then(()=>{s.invalidate(),l()}),disabled:x<1e3,children:"Reroll (1000💰)"})})]}),e.jsx("svg",{children:e.jsxs("filter",{id:"wavy2",children:[e.jsx("feTurbulence",{x:"0",y:"0",baseFrequency:"0.02",numOctaves:"5",seed:"1"}),e.jsx("feDisplacementMap",{in:"SourceGraphic",scale:"20"})]})})]}),o&&e.jsx("div",{style:{position:"absolute",top:"0",bottom:"0",right:"0",left:"0",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsxs("dialog",{open:!0,ref:r,style:{border:"5px solid var(--secondary-color)",backgroundColor:"var(--sable)",display:"flex",flexDirection:"column"},children:[e.jsx(v,{result:o}),e.jsx("button",{className:"devquest-btn-secondary",onClick:()=>i(null),children:"OK"})]})})]})}function v({result:n}){var s;const t=!!n.gain;return e.jsxs("div",{children:[e.jsxs("h2",{children:['La quête "',n.name.toLowerCase(),'"',t?" est un succès":" a échoué"]}),t&&`Vous avez gagné ${n.gain} 💰`,e.jsx("br",{}),((s=n.morts)==null?void 0:s.length)>0?e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"Les héros suivants sont tombés au combat"}),e.jsx("ul",{children:n.morts.map(r=>e.jsxs("li",{style:{listStyle:"none",color:"var(--vert)",fontWeight:"bold"},children:["🪦 ",r]}))})]}):"Aucun mort à déplorer !"]})}function C({difficulty:n}){switch(n){case"FACILE":return e.jsx("span",{role:"img","aria-label":"facile",children:"⚔️"});case"MOYEN":return e.jsx("span",{role:"img","aria-label":"moyen",children:"⚔️⚔️"});case"DIFFICILE":return e.jsx("span",{role:"img","aria-label":"difficile",children:"⚔️⚔️⚔️"});case"EXTREME":return e.jsx("span",{role:"img","aria-label":"extreme",children:"⚔️⚔️⚔️⚔️"});case"IMPOSSIBLE":return e.jsx("span",{role:"img","aria-label":"impossible",children:"⚔️⚔️⚔️⚔️⚔️"});default:return""}}const S=function(){var i,l;const{team:t,quests:s}=f.useLoaderData(),{money:r,score:o}=a.useContext(h);return(!t||((i=t==null?void 0:t.heros)==null?void 0:i.length)===0)&&r<1e3?e.jsx("div",{style:{position:"absolute",top:"0",bottom:"0",right:"0",left:"0",backgroundImage:`url(${m})`,zIndex:"2000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{padding:"2rem",border:"3px solid var(--primary-color)",backgroundColor:"var(--sable)",color:"black",borderRadius:"0.5rem",display:"flex",flexDirection:"column",position:"relative",justifyContent:"center",alignItems:"center"},children:[e.jsx("h1",{children:"Partie terminée !"}),e.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.5rem",color:"var(--secondary-color)"},children:["Votre score est ",o," ⚔"]}),e.jsx("button",{className:"devquest-btn",onClick:()=>{fetch("/api/_reset",{method:"DELETE"}).then(()=>{location.reload()})},children:"Rejouer"})]})}):e.jsx("div",{style:{backgroundImage:`url(${m})`,height:"100%"},children:e.jsxs("div",{style:{padding:"0 2.5rem",display:"flex",flexDirection:"row",backgroundColor:"rgba(255,255,255,0.5)",height:"100%"},children:[e.jsx("div",{style:{width:"50%",flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundImage:""},children:t?e.jsxs(e.Fragment,{children:[e.jsx(y,{team:t}),t.heros.length<4&&e.jsx(u,{className:"devquest-btn",to:"/new-team",search:t,children:"Compléter l'équipe"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},children:e.jsx(u,{to:"/new-team",className:"devquest-btn",children:"Crée ton équipe !"})})}),t&&e.jsx("div",{style:{width:"45%"},children:e.jsx(b,{quests:s,canStart:((l=t==null?void 0:t.heros)==null?void 0:l.length)>0})})]})})};export{y as TeamDisplay,S as component};
