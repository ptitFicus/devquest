import{j as e,b as m,r as l,M as u,L as h,a as j}from"./index-A7h8lev9.js";import{T as p}from"./TeamDetails-PHUsJs85.js";function f({team:t}){return e.jsxs("div",{children:[e.jsx("h2",{children:t.name}),t.heros.length===0?"Aucun membre dans votre groupe":e.jsx(p,{team:t,memberActions:[],actions:[]})]})}function g({quests:t,canStart:n}){const s=j(),o=l.useRef(null),[r,i]=l.useState(null),{refreshMoney:d,money:x}=l.useContext(u);return e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"Qu√™tes"}),e.jsx("ul",{children:t.map(c=>e.jsxs("li",{children:[c.nom,"(",c.difficulte,")",e.jsx("button",{disabled:!n,type:"button",onClick:()=>{fetch(`/api/quetes/${c.nom}/_commencer`,{method:"POST"}).then(a=>a.json()).then(a=>{i(a),s.invalidate(),d()}).then(()=>{})},children:"commencer"})]}))}),e.jsx("button",{onClick:()=>fetch("/api/quetes/_reroll",{method:"POST"}).then(()=>{s.invalidate(),d()}),disabled:x<1e3,children:"Reroll (1000üí∞)"}),r&&e.jsxs("dialog",{open:!0,ref:o,children:[e.jsx(b,{result:r}),e.jsx("button",{onClick:()=>i(null),children:"OK"})]})]})}function b({result:t}){var s;const n=!!t.gain;return e.jsxs("div",{children:[e.jsxs("h4",{children:["La qu√™te ",t.name,n?" est un succ√®s":" a √©chou√©"]}),n&&`Vous avez gagn√© ${t.gain}üí∞`,e.jsx("br",{}),((s=t.morts)==null?void 0:s.length)>0?e.jsxs(e.Fragment,{children:[e.jsx("h5",{children:"Les h√©ros suivants sont tomb√©s au combat"}),e.jsx("ul",{children:t.morts.map(o=>e.jsx("li",{children:o}))})]}):"Aucun mort √† d√©plorer !"]})}const R=function(){var r,i;const{team:n,quests:s}=m.useLoaderData(),{money:o}=l.useContext(u);return(!n||((r=n==null?void 0:n.heros)==null?void 0:r.length)===0)&&o<1e3?e.jsxs("div",{children:[e.jsx("div",{children:"Partie termin√©e"}),e.jsx("button",{onClick:()=>{fetch("/api/_reset",{method:"DELETE"}).then(()=>{location.reload()})},children:"Rejouer"})]}):e.jsxs("div",{style:{padding:"0 2.5rem"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[e.jsx("div",{style:{width:"50%"},children:e.jsx("div",{children:n?e.jsxs(e.Fragment,{children:[e.jsx(f,{team:n}),e.jsx(h,{to:"/new-team",search:n,children:"Edit team"})]}):e.jsx(h,{to:"/new-team",children:"Create your team"})})}),e.jsx("div",{style:{width:"45%"},children:e.jsx(g,{quests:s,canStart:((i=n==null?void 0:n.heros)==null?void 0:i.length)>0})})]}),e.jsx("button",{onClick:()=>{fetch("/api/_reset",{method:"DELETE"}).then(()=>{location.reload()})},children:"Restart game"})]})};export{f as TeamDisplay,R as component};
