import{r as d,u as j,R as m,M as f,a as y,j as e}from"./index-zXFk5viu.js";import{T as b,a as v}from"./TeamDetails-4cavXoyY.js";const C="/assets/groupe-BHBG-dt-.png";function S({availableMembers:a}){const[s,r]=d.useState([]),i=j({from:"/new-team"}),t=m.useSearch(),{refreshMoney:l,money:x}=d.useContext(f),[h,u]=d.useState(!1),p=y();return e.jsx("div",{style:{backgroundImage:`url(${C})`},children:e.jsxs("div",{style:{backgroundColor:"rgba(255,255,255,0.8)",padding:"0.5rem 2rem"},children:[e.jsx("h1",{children:t!=null&&t.heros?"Ã‰dition du groupe":"CrÃ©ation d'un nouveau groupe"}),e.jsx("h2",{children:"Membres du groupe"}),e.jsx(b,{actions:[],team:{heros:((t==null?void 0:t.heros)??[]).concat(s)},memberActions:[n=>{var o;return(o=t==null?void 0:t.heros)!=null&&o.find(c=>c.name===n.name)?{}:{name:`Renvoyer ${n.name}`,callback:()=>{r(c=>c.filter(g=>g.name!==n.name))}}}]}),e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("button",{className:"devquest-btn",onClick:()=>{fetch("/api/groupe",{method:"POST",body:JSON.stringify({heros:((t==null?void 0:t.heros)??[]).concat(s)}),headers:{"Content-Type":"application/json"}}).then(()=>l()).then(()=>i({to:"/"}))},children:t!=null&&t.heros?"Mettre Ã  jour le groupe":"CrÃ©er le groupe"})}),e.jsx("h2",{children:"HÃ©ros disponibles"}),!h&&e.jsx("button",{className:"devquest-btn-secondary",onClick:()=>u(!0),children:"Invoquer un nouveau hÃ©ro"}),h&&e.jsx(k,{onSubmit:n=>{fetch("/api/heros",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(()=>p.invalidate()).then(()=>u(!1))}}),e.jsx("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-around"},children:a.filter(n=>!s.find(o=>o.name===n.name)&&!((t==null?void 0:t.heros)??[]).find(o=>o.name===n.name)).map(n=>e.jsx("div",{style:{margin:"1rem 0.5rem",width:"30vw"},children:e.jsx(v,{details:n,light:!1,actions:((t==null?void 0:t.heros)??[]).concat(s).length<4?[{name:`Recruter ${n.name} (1000ðŸ’°)`,callback:()=>r(o=>[...o,n]),disabled:x-s.length*1e3<1e3}]:[],achievements:!0})}))})]})})}function k(a){return e.jsxs("form",{onSubmit:s=>{s.preventDefault();const r=s.target,i=r.name.value,t=r.classe.value,l=r.exploits.value.split(`
`);a==null||a.onSubmit({name:i,role:t,achievements:l})},style:{backgroundColor:"var(--vert)",border:"1px solid var(--tertiary-color)",padding:"0.5rem 1rem",display:"inline-flex",color:"white",flexDirection:"column",alignItems:"stretch",borderRadius:"0.5rem",justifyContent:"stretch"},children:[e.jsx("h3",{children:"Invocation d'un hÃ©ro"}),e.jsxs("label",{style:{padding:"0.5rem 0"},children:["NomÂ ",e.jsx("input",{name:"name",type:"text"})]}),e.jsxs("label",{style:{padding:"0.5rem 0"},children:["ClasseÂ ",e.jsxs("div",{className:"select",children:[e.jsx("select",{name:"classe",children:["archer","dwarf","elf","king","knight","necromancer","shaman","wizard"].map(s=>e.jsx("option",{children:s}))}),e.jsx("span",{className:"focus"})]})]}),e.jsxs("label",{style:{padding:"0.5rem 0"},children:["Exploits (1 exploit / ligne)",e.jsx("br",{}),e.jsx("textarea",{name:"exploits",style:{width:500,height:80}})]}),e.jsx("button",{type:"submit",className:"devquest-btn-secondary",children:"Invoquer le hÃ©ro (1000 ðŸ’°)"})]})}const M=function(){const s=m.useLoaderData();return e.jsx(S,{availableMembers:s})};export{S as TeamEditor,M as component};
